{% extends "catalogacion/base_catalogacion.html" %}

{% load staticfiles %}

{% block title %}Bibloteca central y especializada unsaac{% endblock title %}

{% block content %}

    {% include "catalogacion/include/header.html" %}

    <div class="container">

        <div class="row">
            <div class="col s12">
                <div class="card border-side top-margin">
                    <div class="card-content">
                        {% if total > 0 %}
                            <div>
                                <span class="lector-name">Se a encontrado {{ total }} resultado(s) en la busqueda</span>
                            </div>
                        {% endif %}
                        <hr>
                        {% for material in materiales %}
                            <article class="row detalle-item">
                                <div class="col s3">
                                    <img src="{{ material.portada.url }}" alt="" class="responsive-img">
                                </div>
                                <div class="col s8">
                                    <dl class="dl-detalle">
                                        <dt>Titulo</dt>
                                        <dd>{{material.titulo}} {{material.titulo_secundario}}</dd>
                                        <dt>Autor</dt>
                                        <dd>{% for autor in material.autor.all %}
                                        <a href="{% url 'catalogacion_app:verreporte' autor.pk %}">{{ autor }} {% if not forloop.last %},{% else %}.{% endif %}</a>
                                        {% endfor %}
                                        </dd>
                                        <dt>Fecha de publicación</dt>
                                        <dd>{{material.created}}</dd>
                                        <dt>ISBN</dt>
                                        <dd>{{material.isbn}}</dd>

                                        <a href="{% url 'catalogacion_app:material' material.pk %}">Ver más... <i class="mdi-av-my-library-books"></i></a>
                                    </dl>
                                </div>
                            </article>
                        {% endfor %}

                        {% if total > 0 %}
                            <ul class="pagination">
                                {% if materiales.has_previous %}
                                    <li class="waves-effect"><a href="?pagina={{ materiales.previous_page_number }}{% if parametros.urlencode %}&{{ parametros.urlencode }}{% endif %}"><i class="mdi-av-skip-previous"></i></a></li>
                                {% endif %}
                                
                                {% for pg in materiales.paginator.page_range %}
                                    {% if materiales.number == pg %}
                                        <li class="active"><a href="?pagina={{ pg }}{% if parametros.urlencode %}&{{ parametros.urlencode }}{% endif %}">{{ pg }}</a></li>
                                    {% else %}
                                        <li><a href="?pagina={{ pg }}{% if parametros.urlencode %}&{{ parametros.urlencode }}{% endif %}">{{ pg }}</a></li>
                                    {% endif %}
                                {% endfor %}

                                {% if materiales.has_next %}
                                    <li class="waves-effect"><a href="?pagina={{ materiales.next_page_number }}{% if parametros.urlencode %}&{{ parametros.urlencode }}{% endif %}"><i class="mdi-av-skip-next"></i></a></li>
                                {% endif %}
                            </ul>
                        {% endif %}
                        
                        {% if errors %}
                            {{ errors}}
                        {% endif %}

                    </div>
                </div>
            </div>
        </div>

    </div>

{% endblock content %}
